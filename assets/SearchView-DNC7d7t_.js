import{_ as J}from"./loading-B85B3wTo.js";import{d as $,m as x,n as S,c as s,b as t,f as e,h as k,t as m,a as R,s as D,e as p,i as y,F as f,k as T,p as V,q as G,v as C,j as o,o as K,x as W,y as X,r as N,w as j,u as Y,_ as Z}from"./app-B0AEo6up.js";const ee={class:"mt-1"},se={key:0},te=["innerHTML"],ae={key:1},ne=["innerHTML"],oe={key:2},ie=["innerHTML"],le={key:3},re=["innerHTML"],de={key:4},B=$({__name:"SearchResultDescription",props:["description"],setup(d){const c=x(!1),g=()=>c.value=!c.value,u=S(()=>d.description.replaceAll(`
`,"<br/>"));return(h,l)=>(t(),s("div",ee,[d.description.length>300&&!c.value&&d.description.indexOf(" ",290)!=-1?(t(),s("div",se,[e("div",{class:"description-text is-read-more",innerHTML:u.value.substring(0,d.description.indexOf(" ",290))},null,8,te),e("button",{class:"read-more",onClick:l[0]||(l[0]=n=>g())}," Read More ")])):d.description.length>300&&!c.value?(t(),s("div",ae,[e("div",{class:"description-text is-read-more",innerHTML:u.value.substring(0,d.description.lastIndexOf(" "))},null,8,ne),k(" "+m(d.description.substring(0,d.description.lastIndexOf(" ")))+" ",1),e("button",{class:"read-more",onClick:l[1]||(l[1]=n=>g())}," Read More ")])):d.description.length>300&&c.value?(t(),s("div",oe,[e("div",{class:"description-text",innerHTML:u.value},null,8,ie),e("button",{class:"read-more",onClick:l[2]||(l[2]=n=>g())}," Read Less ")])):d.description.length>0?(t(),s("div",le,[e("div",{class:"description-text",innerHTML:u.value},null,8,re)])):(t(),s("p",de," No description available. "))]))}}),ce={class:"box"},ue={class:"columns mb-0"},me={class:"column"},he={class:"column is-narrow"},ve={key:0,class:"columns mt-3"},ge={class:"column field is-grouped is-grouped-multiline"},_e={class:"tags has-addons"},pe={class:"tag"},fe=["onClick"],ye={key:1},be={class:"mt-3"},ke=["onClick"],Te=$({__name:"SearchResultItem",props:{item:{}},setup(d){const c=R(),{addTag:g}=c,{getResult:u}=D(c),h=a=>{g(a),window.scrollTo({top:0,left:0,behavior:"smooth"})},l=a=>{confirm(`DISCLAIMER: The data discoverable through ITS DataHub is offered as a public service by the U.S. Department of Transportation (U.S. DOT) and is expressly provided “AS IS” and “AS AVAILABLE”.

No warranty or guarantee is made by the U.S. DOT as to the accuracy, reliability, relevancy, timeliness, utility, quality, availability, or completeness of the data. No active effort has been or will be made to monitor the format and any risks related to the format of the data becoming obsolete. The U.S. DOT assumes no responsibility for errors or omissions found in data discovered through ITS DataHub. The U.S. DOT reserves the right to discontinue availability of content on ITS DataHub at any time and for any reason. U.S. DOT disclaims any responsibility or legal liability whatsoever, including payment of any damages of any kind, such as, lost profits, lost savings, or any other incidental or consequential damages. U.S. DOT makes such disclaimer of any and all claims based on its provision of the data, your use or reliance on the data, or on any requests for technical assistance through data.itsjpo@dot.gov or the U.S. DOT. The user assumes the entire risk associated with the use or misuse of the data. Users should also review any relevant disclaimers found within storage systems used by ITS DataHub and/or datasets discoverable through ITS DataHub.

If you choose to not accept, you will be unable to access the data discoverable through ITS DataHub. Please contact data.itsjpo@dot.gov with any questions or concerns.`)==!0&&window.open(a,"_blank")},n=S(()=>d.item.associatedDatasets&&d.item.associatedDatasets.length>0?d.item.associatedDatasets.map(a=>u.value(a)).filter(a=>!!a):null);return(a,r)=>(t(),s("div",ce,[e("div",ue,[e("div",me,[e("a",{class:"result-header",onClick:r[0]||(r[0]=v=>l(a.item.link)),target:"_blank"},m(a.item.name),1)]),e("div",he,[r[1]||(r[1]=e("span",{class:"has-text-weight-semibold"},"Date Added:",-1)),k(" "+m(a.item.date),1)])]),p(B,{description:a.item.description},null,8,["description"]),a.item.tags?(t(),s("div",ve,[e("div",ge,[(t(!0),s(f,null,T(a.item.tags,v=>(t(),s("div",{key:v,class:"control"},[e("div",_e,[e("span",pe,m(v),1),e("a",{onClick:w=>h(v),title:"Click to add the tag to your search",class:"tag is-add is-grey"},null,8,fe)])]))),128))])])):y("",!0),n.value&&n.value.length>0?(t(),s("div",ye,[r[2]||(r[2]=e("hr",null,null,-1)),e("div",be,[e("details",null,[e("summary",null," Associated Datasets ("+m(n.value.length)+") ",1),(t(!0),s(f,null,T(n.value,v=>(t(),s("div",{key:v.id,class:"associated-dataset"},[e("a",{class:"result-subheader",onClick:w=>l(v.link),target:"_blank"},m(v.name),9,ke),p(B,{description:v.description},null,8,["description"])]))),128))])])])):y("",!0)]))}}),$e={class:"panel"},Se={class:"panel-heading has-background-light has-text-dark is-flex is-justify-content-space-between is-align-items-center"},Ce={key:0},we=["onClick","title"],xe={class:"panel-icon"},De=["src","alt"],Re=$({__name:"SearchResultsTopics",setup(d){R();const c=V(),{setQuery:g}=c,u=x(!1),h=()=>u.value=!u.value,l=x([]);return G(async()=>{await fetch("/data/json/template_categories.json").then(n=>n.json()).then(n=>{for(let a=0;a<Math.min(n.maxButtonCount,n.buttons.length);a++)l.value.push({name:n.buttons[a].CategoryName,imgUrl:"/data/icons/"+n.buttons[a].imgIcons,altText:n.buttons[a].altText})})}),(n,a)=>(t(),s("nav",$e,[e("div",Se,[a[2]||(a[2]=e("div",null,[e("p",null,"Popular Topics"),e("small",{class:"small"},"Click on a topic to perform a search.")],-1)),e("a",{role:"button",class:C(["panel-burger",{"is-active":u.value}]),onClick:a[0]||(a[0]=r=>h()),"aria-label":"menu","aria-expanded":"false"},[...a[1]||(a[1]=[e("span",{"aria-hidden":"true"},null,-1),e("span",{"aria-hidden":"true"},null,-1),e("span",{"aria-hidden":"true"},null,-1)])],2)]),e("div",{class:C(["panel-mobile",{"is-active":u.value}])},[l.value?(t(),s("div",Ce,[(t(!0),s(f,null,T(l.value,r=>(t(),s("a",{class:"panel-block",onClick:v=>o(g)({q:r.name}),title:'Search for "'+r.name+'"',key:r.name},[e("span",xe,[e("img",{src:r.imgUrl,"aria-hidden":"true",alt:r.altText},null,8,De)]),k(" "+m(r.name),1)],8,we))),128))])):y("",!0)],2)]))}}),He={class:"field is-grouped is-grouped-multiline"},qe={class:"tags has-addons"},Me={class:"tag"},Le=["onClick"],Ie=$({__name:"SearchResultsTags",setup(d){const c=R(),{getTags:g}=D(c),{addTag:u}=c;return(h,l)=>(t(),s(f,null,[l[0]||(l[0]=e("h3",{class:"has-text-weight-bold mb-3"},"Common Tags",-1)),e("div",He,[(t(!0),s(f,null,T(o(g),n=>(t(),s("div",{key:n.field,class:"control"},[e("div",qe,[e("span",Me,m(n.field),1),e("a",{onClick:a=>o(u)(n.field),title:"Click to add the tag to your search",class:"tag is-add is-grey"},null,8,Le)])]))),128))])],64))}}),Ae={class:"container is-widescreen p-4"},Oe={class:"breadcrumb has-color-jpo","aria-label":"breadcrumbs"},Ue={class:"is-active"},Ne={class:"columns"},je={class:"column is-one-quarter"},Be={class:"column is-three-quarters"},Ve={class:"columns is-align-items-start mb-0"},Pe={class:"column"},Qe={class:"has-text-weight-bold"},Ee={key:0,class:"is-inline"},Fe={key:1,class:"is-inline"},ze={key:2,class:"is-inline"},Je={key:3,class:"is-inline"},Ge={class:"is-inline query-selection text-truncate"},Ke=["title"],We={key:0},Xe={key:1},Ye={class:"column is-narrow is-flex is-align-items-center"},Ze={class:"tabs is-toggle is-dot is-small"},es={key:0},ss={key:1,class:"has-text-danger"},ts={key:0,class:"is-flex mt-2"},as={class:"field is-grouped is-grouped-multiline"},ns={class:"tags has-addons"},os={class:"tag"},is=["onClick"],ls={class:"tag is-white"},rs={class:"mt-4"},ds={key:0,class:"has-text-centered"},cs={key:1},us={key:2,class:"mt-4"},ms={key:0},hs={key:1},vs=$({__name:"SearchResults",setup(d){const c=R(),{searchResults:g,getResults:u,getActiveTags:h,loading:l,query:n,error:a,getMaxTags:r,initializing:v}=D(c),{updateSearchResults:w,removeTag:P,resetTags:M}=c,L=V(),{getQuery:H}=D(L),{clearQuery:I}=L;K(()=>{w(H.value),window.scrollTo({top:0,left:0})}),W(()=>{I(),M()}),X(H,()=>{w(H.value)});const Q=()=>{I(),window.scrollTo({top:0,left:0})},b=x("relevance"),q=O=>b.value=O,A=S(()=>h.value.length>0),E=S(()=>{if(n.value)return n.value.type==="name"?"fa-solid fa-table":"fa-solid fa-search"}),F=S(()=>{if(n.value?.q)return n.value.q.length>50?n.value.q.slice(0,50)+"...":n.value.q});return(O,i)=>{const U=N("RouterLink"),z=N("font-awesome-icon");return t(),s("section",Ae,[e("nav",Oe,[e("ul",null,[e("li",null,[p(U,{to:"/",title:"Return to Home page"},{default:j(()=>[...i[5]||(i[5]=[k("Home",-1)])]),_:1})]),e("li",Ue,[p(U,{to:"/search","aria-current":"page"},{default:j(()=>[...i[6]||(i[6]=[k("Search",-1)])]),_:1})])])]),e("div",Ne,[e("div",je,[p(Re),p(Ie)]),e("div",Be,[e("div",Ve,[e("div",Pe,[e("div",Qe,[o(l)||o(v)?(t(),s("div",Ee,"Loading results...")):o(a)?(t(),s("div",Fe,"Cannot load results")):(t(),s("div",ze,m(o(g).length)+" result(s) ",1)),!o(l)&&o(n)?(t(),s("div",Je,[i[7]||(i[7]=k(" found for ",-1)),e("div",Ge,[p(z,{icon:E.value,class:"mx-1"},null,8,["icon"]),e("span",{title:o(n).q},m(F.value),9,Ke),e("button",{class:"delete is-small ml-2",style:{"vertical-align":"middle"},onClick:i[0]||(i[0]=_=>Q()),title:"Click to reset search query"})])])):y("",!0)]),A.value?(t(),s("small",We,"Refined to "+m(o(u)(b.value).length),1)):(t(),s("small",Xe,"Click on a tag to add it to your search. This will filter the datasets to those that match all your selected tags"))]),e("div",Ye,[i[8]||(i[8]=e("small",{class:"mr-2"},"Sort by:",-1)),e("div",Ze,[e("ul",null,[e("li",{class:C({"is-active":b.value==="relevance"})},[e("a",{onClick:i[1]||(i[1]=_=>q("relevance"))},"Relevance")],2),e("li",{class:C({"is-active":b.value==="name"})},[e("a",{onClick:i[2]||(i[2]=_=>q("name"))},"Name")],2),e("li",{class:C({"is-active":b.value==="date"})},[e("a",{onClick:i[3]||(i[3]=_=>q("date"))},"Date")],2)])])])]),e("div",null,[o(h).length>0&&o(h).length<o(r)?(t(),s("small",es,m(o(h).length)+" / "+m(o(r))+" tags selected",1)):y("",!0),o(h).length>=o(r)?(t(),s("small",ss,m(o(h).length)+" / "+m(o(r))+" tags selected",1)):y("",!0)]),A.value?(t(),s("div",ts,[e("div",as,[(t(!0),s(f,null,T(o(h),_=>(t(),s("div",{key:_,class:"control"},[e("div",ns,[e("span",os,m(_),1),e("a",{onClick:gs=>o(P)(_),title:"Click to remove tag from filter",class:"tag is-delete is-grey"},null,8,is)])]))),128)),e("div",ls,[e("a",{class:"has-text-dark",onClick:i[4]||(i[4]=_=>o(M)())},"Clear all tags")])])])):y("",!0),e("div",rs,[o(l)||o(v)?(t(),s("div",ds,[...i[9]||(i[9]=[e("img",{src:J},null,-1)])])):o(a)?(t(),s("div",cs,[...i[10]||(i[10]=[e("article",{class:"message is-danger"},[e("div",{class:"message-body"}," The website has encountered an error while attempting to load datasets. This may be due to an API limit being reached. Please contact a site administrator or try again later ")],-1)])])):(t(),s("div",us,[o(u).length!==0?(t(),s("div",ms,[e("ul",null,[(t(!0),s(f,null,T(o(u)(b.value),_=>(t(),s("li",{class:"mb-5 mx-4",key:_.id},[p(Te,{item:_},null,8,["item"])]))),128))])])):(t(),s("div",hs,[...i[11]||(i[11]=[e("article",{class:"message is-warning"},[e("div",{class:"message-body"},"No search results could be found for the given query and/or tags.")],-1)])]))]))])])])])}}}),fs=$({__name:"SearchView",setup(d){return Y({title:"Department of Transportation - ITS DataHub | Search",meta:[{name:"description",content:"Search results providing discovery of ITS JPO data."}]}),(c,g)=>(t(),s(f,null,[p(Z,{hasSearchComponent:!0}),e("main",null,[p(vs)])],64))}});export{fs as default};
