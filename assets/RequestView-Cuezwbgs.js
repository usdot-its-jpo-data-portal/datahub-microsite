import{m as f,o as O,n as T,r as Y,c as n,b as i,f as s,t as c,z as F,i as m,A as C,D as R,j as t,v as h,F as v,k as b,B as w,e as r,h as k,C as Q,d as U,u as j,_ as M}from"./app-BQZOJ0DL.js";import{u as Z,m as E,r as z,e as J}from"./index-DtIU7sGh.js";const A={class:"box py-4"},L={key:0},P={class:"columns mb-0"},X={class:"column"},G={class:"control mb-4"},W={class:"select"},K=["aria-invalid"],aa=["value"],ea={class:"field"},sa={class:"control has-icons-left has-icons-right"},ta=["aria-invalid"],oa={class:"icon is-small is-left"},na={key:0,class:"icon is-small is-right"},ia={key:1,class:"icon is-small is-right"},la={class:"field"},ra={class:"control has-icons-left has-icons-right"},da=["aria-invalid"],ua={class:"icon is-small is-left"},ca={key:0,class:"icon is-small is-right"},ma={key:1,class:"icon is-small is-right"},pa={class:"field"},fa={class:"control has-icons-left has-icons-right"},va=["aria-invalid"],ga={class:"icon is-small is-left"},ha={key:0,class:"icon is-small is-right"},ba={key:1,class:"icon is-small is-right"},ya={class:"field"},$a={class:"control"},Ca=["aria-invalid"],wa={key:0,class:"notification is-danger is-light mt-3"},ka={key:1,class:"notification is-danger is-light mt-3"},Ea={class:"control mt-4"},za=["disabled"],Na={__name:"RequestForm",setup(q){const p=f(!1),y=f(!0),$=f(null),N=f(!1),V=f(!1),S=()=>{var l=document.querySelector("#captcha-container");AwsWafCaptcha.renderCaptcha(l,{apiKey:"gpXqf8izCY3eGXU4iRbCEm8Yp4OI08/v0+b138h1LgTC8XC+2VVv50BAfiYJwmbRNI0HbUJj4bu83kQH0VCCZGENdAjnQXLR7MWGFIGHu5TVZ/K1hF5tBEY7orBFJ87Kngy33UDeCCaatvD8zS4NItc8s9vCJNldpmPRSqFavQJxRuzH1NC1wIo5sa39r8CieGxz+u2brKkBdYHW/dQ7tC3H/VtJZeC8yYQ47ocejUCeMleE2uqdYJ3OdMRlP7wrjaj/njZJMndvQoqA9Y8nE4wg3fFyICY0wVbem9SCUfr9gpvqHjSBznVzFwfY9Yz12365T3A3ukaQQWIcKNare7//wLqHZ4wyHkEXd3HGus2IXvDBossNcZRp8XDwbXKE6hUlVqYtoeqWow96ZEfka/yg8NOrosUMlCQuyrC5xdhO7I4kgleVfwU+80QkRMzFso0oC9vmn3FNFOfNonBspk6CQ9OO2gQoXYVDnVZ7oZXurHVOMMh36VzqAuvCQJVfLNEncsB2GQVmBLfY/fuTG9FciQyVw9uZytDpBkuTcp+nXb3ZV54KvjIf2+wSW4z2uVoY2DeGh9ZGJv5MQEd6PsYPkRhPyWt7EibH/Tp8rVZboKKkye0H/r+RBrSGe471TQEO0YnhFLVr4qAlDIaylyslIYg4aUWnVH9986X38kI=_0_1",onSuccess:x,onError:D,dynamicWidth:!0,disableLanguageSelector:!0,skipTitle:!0})},x=l=>{y.value=!1},D=l=>{$.value=l},I=()=>{p.value=!0,e.value.$validate(),e.value.$invalid?(N.value=!0,p.value=!1):AwsWafIntegration.fetch("https://s6ecoa09xe.execute-api.us-east-1.amazonaws.com/v1/forms/data-request",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(g.value)}).then(async a=>{a.ok?(V.value=!0,Q(await a.json())):$.value="Response could not be successfully returned.",p.value=!1}).catch(a=>{$.value="Form could not be submitted",p.value=!1})},_=f([{value:"intersection-safety-challenge-stage-1b-data",label:"Intersection Safety Challenge Stage 1B Data"},{value:"wzdx",label:"Work Zone Data Exchange"},{value:"cv-pilot",label:"Connected Vehicle (CV) Pilot"}]),g=f({contactName:"",contactEmail:"",organization:"",dataset:"",useCase:""}),B={contactName:{required:z,minLength:E(3)},contactEmail:{required:z,email:J},organization:{minLength:E(3)},dataset:{required:z,validOption:l=>_.value.map(a=>a.value).includes(l)},useCase:{minLength:E(10)}},e=Z(B,g),d=l=>!l.$invalid&&l.$dirty;O(()=>{S()});const H=T(()=>({Name:g.value.contactName,Email:g.value.contactEmail,Organization:g.value.organization,Dataset:g.value.dataset}));return(l,a)=>{const u=Y("font-awesome-icon");return i(),n("div",A,[V.value?(i(),n("div",L,[a[10]||(a[10]=s("h2",{class:"section-heading"},"You have submitted a data request",-1)),a[11]||(a[11]=s("p",{class:"mb-2"},"Someone will reach out soon for more information. Here is a summary of the information you submitted:",-1)),s("pre",null,c(H.value),1)])):(i(),n("form",{key:1,onSubmit:F(I,["prevent"])},[a[27]||(a[27]=s("h2",{class:"section-heading mb-4"},"DataHub Request Form",-1)),s("div",P,[s("div",X,[a[16]||(a[16]=s("label",{class:"label mb-0",for:"dataset"},"Dataset",-1)),a[17]||(a[17]=s("p",{class:"help mb-2 mt-0"},"Select the data you wish to request a download for",-1)),s("div",G,[s("div",W,[C(s("select",{"onUpdate:modelValue":a[0]||(a[0]=o=>t(e).dataset.$model=o),onBlur:a[1]||(a[1]=(...o)=>t(e).dataset.$touch&&t(e).dataset.$touch(...o)),id:"dataset","aria-invalid":t(e).dataset.$error,class:h({"is-danger":t(e).dataset.$error,"is-success":d(t(e).dataset)})},[(i(!0),n(v,null,b(_.value,o=>(i(),n("option",{key:o.value,value:o.value},c(o.label),9,aa))),128))],42,K),[[R,t(e).dataset.$model]])]),(i(!0),n(v,null,b(t(e).dataset.$errors,o=>(i(),n("p",{class:"help is-danger",key:o.$uid},c(o.$message),1))),128))]),a[18]||(a[18]=s("label",{class:"label mb-0"},"Contact Information",-1)),a[19]||(a[19]=s("p",{class:"help mb-2 mt-0"},"Please provide your contact information. A follow-up email will be sent informing you of next steps.",-1)),s("div",ea,[a[12]||(a[12]=s("label",{class:"is-sr-only",for:"contactName"},"Name",-1)),s("p",sa,[C(s("input",{class:h(["input",{"is-danger":t(e).contactName.$error,"is-success":d(t(e).contactName)}]),type:"text",placeholder:"Name",id:"contactName","onUpdate:modelValue":a[2]||(a[2]=o=>t(e).contactName.$model=o),onBlur:a[3]||(a[3]=(...o)=>t(e).contactName.$touch&&t(e).contactName.$touch(...o)),"aria-invalid":t(e).contactName.$error},null,42,ta),[[w,t(e).contactName.$model]]),s("span",oa,[r(u,{icon:"fa-solid fa-user"})]),t(e).contactName.$error?(i(),n("span",na,[r(u,{icon:"fa-solid fa-exclamation-triangle"})])):m("",!0),d(t(e).contactName)?(i(),n("span",ia,[r(u,{icon:"fa-solid fa-check"})])):m("",!0)]),(i(!0),n(v,null,b(t(e).contactName.$errors,o=>(i(),n("p",{class:"help is-danger",key:o.$uid},c(o.$message),1))),128))]),s("div",la,[a[13]||(a[13]=s("label",{class:"is-sr-only",for:"contactEmail"},"Email",-1)),s("p",ra,[C(s("input",{class:h(["input",{"is-danger":t(e).contactEmail.$error,"is-success":d(t(e).contactEmail)}]),type:"text",placeholder:"Email",id:"contactEmail","onUpdate:modelValue":a[4]||(a[4]=o=>t(e).contactEmail.$model=o),onBlur:a[5]||(a[5]=(...o)=>t(e).contactEmail.$touch&&t(e).contactEmail.$touch(...o)),"aria-invalid":t(e).contactEmail.$error},null,42,da),[[w,t(e).contactEmail.$model]]),s("span",ua,[r(u,{icon:"fa-solid fa-envelope"})]),t(e).contactEmail.$error?(i(),n("span",ca,[r(u,{icon:"fa-solid fa-exclamation-triangle"})])):m("",!0),d(t(e).contactEmail)?(i(),n("span",ma,[r(u,{icon:"fa-solid fa-check"})])):m("",!0)]),(i(!0),n(v,null,b(t(e).contactEmail.$errors,o=>(i(),n("p",{class:"help is-danger",key:o.$uid},c(o.$message),1))),128))]),a[20]||(a[20]=s("label",{class:"label mb-0",for:"organization"},"Organization",-1)),a[21]||(a[21]=s("p",{class:"help mt-0 mb-2"},"If you are requesting the data on behalf of an organization, please provide the name below.",-1)),s("div",pa,[s("p",fa,[C(s("input",{class:h(["input",{"is-danger":t(e).organization.$error,"is-success":d(t(e).organization)}]),type:"text",placeholder:"Organization",id:"organization","onUpdate:modelValue":a[6]||(a[6]=o=>t(e).organization.$model=o),onBlur:a[7]||(a[7]=(...o)=>t(e).organization.$touch&&t(e).organization.$touch(...o)),"aria-invalid":t(e).organization.$error},null,42,va),[[w,t(e).organization.$model]]),s("span",ga,[r(u,{icon:"fa-solid fa-file-pen"})]),t(e).organization.$error?(i(),n("span",ha,[r(u,{icon:"fa-solid fa-exclamation-triangle"})])):m("",!0),d(t(e).organization)?(i(),n("span",ba,[r(u,{icon:"fa-solid fa-check"})])):m("",!0)]),(i(!0),n(v,null,b(t(e).organization.$errors,o=>(i(),n("p",{class:"help is-danger",key:o.$uid},c(o.$message),1))),128))]),s("div",ya,[a[14]||(a[14]=s("label",{class:"label mb-0",for:"useCase"},"Use Case",-1)),a[15]||(a[15]=s("p",{class:"help mt-0 mb-2"}," Optionally, you can provide the reason for your data request to help us understand how this data is being used. This response will not have an impact on your access to the data. ",-1)),s("p",$a,[C(s("textarea",{class:h(["textarea has-fixed-size",{"is-danger":t(e).useCase.$error,"is-success":d(t(e).useCase)}]),placeholder:"Description of Use Case (Optional)",id:"useCase","onUpdate:modelValue":a[8]||(a[8]=o=>t(e).useCase.$model=o),onBlur:a[9]||(a[9]=(...o)=>t(e).useCase.$touch&&t(e).useCase.$touch(...o)),"aria-invalid":t(e).useCase.$error},null,42,Ca),[[w,t(e).useCase.$model]])]),(i(!0),n(v,null,b(t(e).useCase.$errors,o=>(i(),n("p",{class:"help is-danger",key:o.$uid},c(o.$message),1))),128))])])]),a[28]||(a[28]=s("label",{class:"label mb-0",for:"captcha-container"},"Complete the Captcha Puzzle",-1)),a[29]||(a[29]=s("div",{class:"",id:"captcha-container"},null,-1)),$.value?(i(),n("div",wa,[s("p",null,[a[22]||(a[22]=k("A server error has been encountered: ",-1)),s("strong",null,c($.value),1),a[23]||(a[23]=k(". If errors persist, please contact ",-1)),a[24]||(a[24]=s("a",{href:"mailto:data.itsjpo@dot.gov"},"data.itsjpo@dot.gov",-1)),a[25]||(a[25]=k(" for additional support.",-1))])])):m("",!0),N.value&&!d(t(e))?(i(),n("div",ka,[...a[26]||(a[26]=[s("p",null,"Your submission was invalid. Please correct the errors above to submit.",-1)])])):m("",!0),s("div",Ea,[s("button",{class:h(["button is-primary",{"is-loading":p.value}]),type:"submit",disabled:y.value||p.value,"aria-label":"Submit Form"}," Submit ",10,za)])],32))])}}},Va={class:"pb-6 has-padding-mobile"},_a={class:"container is-max-desktop"},xa=U({__name:"RequestView",setup(q){return j({title:"Department of Transportation - ITS DataHub | Data Request",meta:[{name:"description",content:"Requesting large datasets from DataHub"}]}),(p,y)=>(i(),n(v,null,[r(M),s("main",null,[s("section",Va,[s("div",_a,[y[0]||(y[0]=s("article",{class:"mb-4"},[s("h1",{class:"page-heading mt-5 has-color-dot"},"ITS DataHub Requests"),s("p",{class:"mb-2"}," ITS DataHub is a web-system designed for storing and making any open, non-personally identifiable data generated by the ITS Joint Program Office (JPO) funded projects discoverable. Most datasets are available for instant access and download through the search feature, however, for technical reasons, some larger datasets require filling out the form below prior to access and download. There are no restrictions on who can use this form to access the data. "),s("p",{class:"mb-2"}," After you submit the form below, an administrator will be in contact to follow up with instructions for downloading the requested data. ")],-1)),r(Na)])])])],64))}});export{xa as default};
