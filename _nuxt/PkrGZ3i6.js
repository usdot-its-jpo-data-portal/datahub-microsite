import J from"./CENjZ9-u.js";import K from"./DyPCvQa6.js";import Q from"./7O4RVRTX.js";import{f as W,az as X,S as Y,A as Z,h as ee,c as p,o as m,a as f,b as a,w as t,d as s,F as b,r as w,G as k,q as te,j as n,i as T,al as ae,t as B,H as oe}from"./DFxU6Zkn.js";import{_ as ne}from"./BUs4Whrf.js";import{_ as se,a as le}from"./C9Bzw3oN.js";import{_ as re}from"./Bm994cQ6.js";import{_ as ie}from"./CIlF1p01.js";import{_ as ue}from"./DRWO3bZW.js";import{_ as me}from"./C2eTc8Gb.js";import{_ as de}from"./BSuGr7w5.js";import{_ as ce}from"./B1UEEVUq.js";import{u as F,c as fe,b as _e,d as pe}from"./KYkRis_r.js";import{c as N}from"./47rTekx2.js";import"./D88bYSvS.js";import"./Bh_YZx0V.js";import"./P_SoW3se.js";import"./_e_qfkaz.js";import"./Edj9Qn0N.js";import"./BKshomUh.js";function P(v,y){return v.length>y?`${v.slice(0,y)}...`:v}const ve={class:"@container flex flex-col gap-6"},ye={class:"flex gap-2 justify-between items-center"},Ce={class:"grid flex-1"},ge={class:"font-semibold truncate"},be={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},ke={class:"flex justify-end"},he={class:"flex gap-2"},xe={name:"MetadataDatasetColumns"},Se=W({...xe,setup(v){const{datasetColumns:y,datasets:h}=X(F()),{moveToPreviousStep:j,submitDatasetColumns:q}=F(),l=Y([]);Z(()=>{l.value=[...y.value];for(const o of l.value)o.columns.length===0&&o.columns.push(N())});function z(o){const e=l.value.findIndex(r=>r.datasetId===o);e!==-1&&l.value[e]?.columns.push(N())}function O(o,e){const r=l.value.findIndex(_=>_.datasetId===o);if(r===-1)return;const i=l.value[r]?.columns;if(i&&i.length>1){const _=i.findIndex(x=>x.id===e);i.splice(_,1)}}const U=ee(()=>o=>{const e=l.value.findIndex(i=>i.datasetId===o);if(e===-1)return!1;const r=l.value[e]?.columns;return r?r.length>1:!1});return(o,e)=>{const r=J,i=K,_=Q,x=oe,A=ne,S=le,M=re,G=ie,C=te,H=ae,R=ue,$=me,V=se,D=de,E=ce;return m(),p("div",ve,[f("div",null,[a(r,null,{default:t(()=>[...e[1]||(e[1]=[s("Dataset Columns",-1)])]),_:1}),a(i,null,{default:t(()=>[...e[2]||(e[2]=[s(" Please provide the name, description, and data type of each column that exists in all of your main data files. ",-1)])]),_:1}),a(i,null,{default:t(()=>[e[4]||(e[4]=f("span",{class:"font-bold"},"Note:",-1)),e[5]||(e[5]=s(" If you are including a column that contains DateTime values and you would like to be able to filter/sort your dataset by these values, please make sure that they are in ",-1)),a(_,{to:"https://en.wikipedia.org/wiki/ISO_8601",external:"",rel:"noopener noreferrer",target:"_blank"},{default:t(()=>[...e[3]||(e[3]=[s(" ISO 8601 ",-1)])]),_:1}),e[6]||(e[6]=s(" format. ",-1))]),_:1})]),a(V,{state:l.value,schema:n(pe),class:"flex flex-col gap-8",onSubmit:e[0]||(e[0]=u=>n(q)(u.data))},{default:t(()=>[a($,null,{default:t(()=>[a(D,null,{default:t(()=>[(m(!0),p(b,null,w(l.value,(u,g)=>(m(),k(E,{key:u.datasetId,variant:"soft",ui:{header:"bg-neutral-200"}},{header:t(()=>[f("div",ye,[f("div",Ce,[f("h4",ge,B(("truncateString"in o?o.truncateString:n(P))(n(h)[g]?.title??"",60)),1)]),n(h)[g]?.fileName?(m(),k(x,{key:0,color:"neutral",variant:"subtle"},{default:t(()=>[s(B(("truncateString"in o?o.truncateString:n(P))(n(h)[g]?.fileName??"",15)),1)]),_:2},1024)):T("",!0)])]),default:t(()=>[a($,null,{default:t(()=>[a(D,null,{default:t(()=>[(m(!0),p(b,null,w(u.columns,(d,I)=>(m(),k(V,{key:I,schema:n(fe),name:`${g}.columns.${I}`,nested:""},{default:t(()=>[a($,null,{default:t(()=>[f("div",be,[a(S,{required:!0,label:"Name",name:"name"},{default:t(()=>[a(A,{modelValue:d.name,"onUpdate:modelValue":c=>d.name=c,class:"w-full",placeholder:"Column name",icon:"lucide:letter-text"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(S,{required:!0,label:"Data type",name:"dataType"},{default:t(()=>[a(M,{modelValue:d.dataType,"onUpdate:modelValue":c=>d.dataType=c,items:Object.entries(n(_e)).map(([c,L])=>({value:c,label:L})),class:"w-full",placeholder:"Select column data type"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),a(S,{required:!0,label:"Description",name:"description"},{default:t(()=>[a(G,{modelValue:d.description,"onUpdate:modelValue":c=>d.description=c,autoresize:"",rows:1,maxrows:2,class:"resize-none w-full",placeholder:"Brief description of column"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(H,null,{default:t(()=>[a(C,{color:"error",size:"sm",disabled:!n(U)(u.datasetId),label:"Delete",icon:"lucide:trash-2",class:"self-end",onClick:c=>O(u.datasetId,d.id)},null,8,["disabled","onClick"])]),content:t(()=>[n(U)(u.datasetId)?(m(),p(b,{key:0},[s(" This will clear any metadata you've provided for this column ")],64)):(m(),p(b,{key:1},[s(" At least one column is required for each dataset. ")],64))]),_:2},1024),I<u.columns.length-1?(m(),k(R,{key:0})):T("",!0)]),_:2},1024)]),_:2},1032,["schema","name"]))),128))]),_:2},1024)]),_:2},1024)]),footer:t(()=>[a(C,{color:"success",size:"sm",onClick:d=>z(u.datasetId)},{default:t(()=>[...e[7]||(e[7]=[s(" Add Column ",-1)])]),_:1},8,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),f("div",ke,[f("div",he,[a(C,{color:"neutral",variant:"soft",onClick:n(j)},{default:t(()=>[...e[8]||(e[8]=[s(" Back ",-1)])]),_:1},8,["onClick"]),a(C,{type:"submit",color:"primary"},{default:t(()=>[...e[9]||(e[9]=[s(" Save and Continue ",-1)])]),_:1})])])]),_:1},8,["state","schema"])])}}}),Ee=Object.assign(Se,{__name:"MetadataDatasetColumns"});export{Ee as default};
