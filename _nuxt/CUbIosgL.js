import T from"./DDbT4-To.js";import O from"./IBmhqWhp.js";import{_ as q}from"./1SaarQ5-.js";import{_ as D}from"./BwRCwlPJ.js";import{_ as z,a as A}from"./C6ukg3sm.js";import{_ as J}from"./05kT4I3W.js";import{_ as L}from"./CNDGWnad.js";import{f as E,K as G,Y as H,c as S,o as i,a as d,b as t,w as a,d as s,s as _,i as b,ak as K,q as Y,F as Q,r as R,j as m,af as W}from"./CTM-UXwp.js";import{_ as X}from"./SEP4cSDA.js";import{_ as Z}from"./Cq7QM8z_.js";import{_ as ee}from"./DHuvJM40.js";import{u as $,s as te,h as ae}from"./C3tgtHDE.js";import{b as oe}from"./Zh0PsCTm.js";import"./DR_irzcd.js";import"./DZ9OMGKV.js";import"./BKowkTF0.js";import"./CM4A4mA2.js";import"./DIJoEdYV.js";import"./DGaKuYAa.js";import"./_e_qfkaz.js";import"./Edj9Qn0N.js";import"./DO-GUAxx.js";const ne={class:"@container flex flex-col gap-6"},se={class:"flex justify-end"},le={class:"flex gap-2"},ie={name:"MetadataSupplementaryFiles"},me=E({...ie,setup(re){const{supplementaryFiles:U,datasets:c}=$(),{submitSupplementaryFiles:C,moveToPreviousStep:V}=$(),o=G([]);function y(){const l=oe();if(c.length===1){const e=c[0]?.id;e&&l.datasetIds.push(e)}o.value.push(l)}function w(l){const e=o.value.findIndex(f=>f.id===l);o.value.splice(e,1)}return H(()=>{o.value=JSON.parse(JSON.stringify(U)),o.value.length===0&&y()}),(l,e)=>{const f=T,I=O,v=q,N=D,x=A,B=J,F=L,r=Y,M=W,P=X,k=Z,g=z,j=ee;return i(),S("div",ne,[d("div",null,[t(f,null,{default:a(()=>[...e[2]||(e[2]=[s("Supplementary Files",-1)])]),_:1}),t(I,null,{default:a(()=>[...e[3]||(e[3]=[s(" Please list the names and file extensions of any supplementary files expected in your submission. If you have multiple datasets, then you must associate each supplementary file with one or more datasets. ",-1)])]),_:1}),t(v,{color:"info",variant:"soft"},{description:a(()=>[...e[4]||(e[4]=[s(" Make sure your file name includes the full file name and extension ",-1),d("span",{class:"italic"},"(e.g. supporting-data.csv)",-1),s(". If the file name cannot be verified when your project folder is uploaded, you may have to resubmit. ",-1)])]),_:1})]),t(g,{schema:m(ae),state:o.value,class:"flex flex-col gap-8",onSubmit:e[1]||(e[1]=u=>m(C)(u.data))},{default:a(({errors:u})=>[t(k,null,{default:a(()=>[t(j,{variant:"soft"},K({footer:a(()=>[t(r,{color:"success",size:"sm",onClick:e[0]||(e[0]=n=>y())},{default:a(()=>[...e[6]||(e[6]=[s(" Add File ",-1)])]),_:1})]),_:2},[o.value.length>0?{name:"default",fn:a(()=>[t(F,null,{default:a(()=>[(i(!0),S(Q,null,R(o.value,(n,h)=>(i(),_(g,{key:n.id,schema:m(te),name:`${h}`,nested:""},{default:a(()=>[t(k,null,{default:a(()=>[t(F,null,{default:a(()=>[t(x,{required:!0,label:"File name",name:"name"},{default:a(()=>[t(N,{modelValue:n.name,"onUpdate:modelValue":p=>n.name=p,class:"w-full",icon:"lucide:file-pen-line",placeholder:"Name with extension (description.docx)"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),t(x,{required:!0,label:"Datasets",name:"datasetIds"},{default:a(()=>[t(B,{modelValue:n.datasetIds,"onUpdate:modelValue":p=>n.datasetIds=p,items:m(c),"value-key":"id","label-key":"title","description-key":"fileName",multiple:"",class:"w-full","open-on-click":"",placeholder:"Select datasets",icon:"lucide:tag",ui:{tagsItem:"max-w-[300px]",itemLabel:"truncate",itemDescription:"truncate"}},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),_:2},1024),t(M,{ui:{content:"max-w-sm h-fit"}},{default:a(()=>[t(r,{color:"error",size:"sm",label:"Delete",icon:"lucide:trash-2",class:"self-end",onClick:p=>w(n.id)},null,8,["onClick"])]),content:a(()=>[...e[5]||(e[5]=[s(" This will clear any metadata you've provided for this file. ",-1)])]),_:2},1024),h<o.value.length-1?(i(),_(P,{key:0})):b("",!0)]),_:2},1024)]),_:2},1032,["schema","name"]))),128))]),_:1})]),key:"0"}:void 0]),1024),u.length>0?(i(),_(v,{key:0,color:"error",variant:"subtle",title:"Please fix the following errors before continuing:",description:u.map(n=>n.message).join(", ")},null,8,["description"])):b("",!0),d("div",se,[d("div",le,[t(r,{color:"neutral",variant:"soft",onClick:m(V)},{default:a(()=>[...e[7]||(e[7]=[s(" Back ",-1)])]),_:1},8,["onClick"]),t(r,{type:"submit",color:"primary"},{default:a(()=>[...e[8]||(e[8]=[s(" Save and Continue ",-1)])]),_:1})])])]),_:2},1024)]),_:1},8,["schema","state"])])}}}),Be=Object.assign(me,{__name:"MetadataSupplementaryFiles"});export{Be as default};
