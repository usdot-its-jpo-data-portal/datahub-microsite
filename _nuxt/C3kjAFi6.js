import q from"./DDbT4-To.js";import E from"./IBmhqWhp.js";import{_ as A}from"./CefzYZ3M.js";import{_ as L}from"./BwRCwlPJ.js";import{_ as z,a as K}from"./C6ukg3sm.js";import{_ as H}from"./CW54TMvo.js";import{_ as G}from"./CNDGWnad.js";import{f as J,ay as W,K as Z,h as R,Y as X,c,o as i,a as s,b as a,w as t,d as l,s as b,i as S,q as Y,F as v,r as Q,j as p,af as ee}from"./CTM-UXwp.js";import{_ as te}from"./SEP4cSDA.js";import{_ as ae}from"./Cq7QM8z_.js";import{_ as oe}from"./DHuvJM40.js";import{_ as se}from"./1SaarQ5-.js";import{u as C,f as ne,g as le}from"./C3tgtHDE.js";import{a as ie}from"./Zh0PsCTm.js";import"./DR_irzcd.js";import"./_e_qfkaz.js";import"./Edj9Qn0N.js";import"./DO-GUAxx.js";const re={class:"@container flex flex-col gap-6"},de={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},me={class:"flex justify-end"},ue={class:"flex gap-2"},ce={name:"MetadataDatasets"},pe=J({...ce,setup(fe){const T=[{label:"Which dataset file types are accepted?",slot:"datasetFileTypes"},{label:"Can I submit multiple datasets at once?",slot:"multipleDatasets"},{label:"What should I include in the description?",slot:"datasetDescription"}],{datasets:U}=W(C()),{moveToPreviousStep:M,submitDatasets:$}=C(),n=Z([]);function y(){n.value.push(ie())}const f=R(()=>n.value.length>1);function F(g){if(f.value){const e=n.value.findIndex(m=>m.id===g);n.value[e]&&n.value.splice(e,1)}}return X(()=>{n.value=Array.from(U.value),n.value.length===0&&y()}),(g,e)=>{const x=q,m=E,B=A,D=L,_=K,N=H,w=G,u=Y,I=ee,j=te,V=ae,k=z,P=oe,O=se;return i(),c("div",re,[s("div",null,[a(x,null,{default:t(()=>[...e[1]||(e[1]=[l("Datasets",-1)])]),_:1}),a(m,null,{default:t(()=>[...e[2]||(e[2]=[l(" Please provide some basic information about all the main datasets in your project. On the next page, you will identify the columns in each of these datasets. ",-1)])]),_:1}),a(m,null,{default:t(()=>[...e[3]||(e[3]=[s("span",{class:"font-bold"},"Warning:",-1),l(" To use the automated submission process, your dataset must be one of the accepted file types listed below. ",-1)])]),_:1}),a(B,{items:T},{"datasetFileTypes-body":t(()=>[...e[4]||(e[4]=[s("p",null," If your file is not one of these file types, please continue over email to submit your project. Parseable file types are: ",-1),s("p",{class:"mt-2"}," Comma-separated values (CSV), Tab-separated values (TSV), Microsoft Excel (XLS), Microsoft Excel (OpenXML), ZIP archive (shapefile), JSON format (GeoJSON), GeoJSON format, Keyhole Markup Language (KML), Zipped Keyhole Markup Language (KMZ) ",-1)])]),"multipleDatasets-body":t(()=>[...e[5]||(e[5]=[s("p",null," Many projects only have one main dataset. However, some may have multiple main datasets that they want to make visible independently on ITS DataHub. An example of this may be if you have different datasets generated for each trial in a project. Each dataset should be able to stand alone as its own entry on ITS DataHub, so the name and file name should be unique. ",-1),s("p",{class:"italic mt-2"}," Example Dataset: First Experiment (first-experiment.xlsx) ",-1)])]),"datasetDescription-body":t(()=>[...e[6]||(e[6]=[s("p",null," You should provide a brief description of the data being made available and a background on the project that generated the data. If multiple files are being provided as part of a single dataset, provide a brief description on how they are related to each other. Please provide sufficient detail and information for a third party to easily understand the submitted data. ",-1),s("p",{class:"italic mt-2"}," Example Description: This dataset contains data collected from the first Connected Vehicle (CV) prototype demonstration conducted on I-81 in Virginia. 53 vehicles and 21 trucks that regularly traverse the highway were equipped with aftermarket on-board units (OBUs) to generate Basic Safety Messages (BSMs). The collected BSMs were then anonymized before being included here. ",-1)])]),_:1})]),a(k,{schema:p(le),state:n.value,class:"flex flex-col gap-8",onSubmit:e[0]||(e[0]=d=>p($)(d.data))},{default:t(({errors:d})=>[a(V,null,{default:t(()=>[a(P,{variant:"soft"},{default:t(()=>[a(w,null,{default:t(()=>[(i(!0),c(v,null,Q(n.value,(o,h)=>(i(),b(k,{key:h,name:`${h}`,schema:p(ne),nested:""},{default:t(()=>[a(V,null,{default:t(()=>[a(w,null,{default:t(()=>[s("div",de,[a(_,{required:!0,label:"Title",name:"title"},{default:t(()=>[a(D,{modelValue:o.title,"onUpdate:modelValue":r=>o.title=r,class:"w-full",placeholder:"Dataset title",icon:"lucide:letter-text"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(_,{required:!0,label:"File name",name:"fileName"},{default:t(()=>[a(D,{modelValue:o.fileName,"onUpdate:modelValue":r=>o.fileName=r,class:"w-full",icon:"lucide:file-pen-line",placeholder:"Name with extension (dataset.csv)"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),a(_,{required:!0,label:"Description",name:"description"},{default:t(()=>[a(N,{modelValue:o.description,"onUpdate:modelValue":r=>o.description=r,autoresize:"",rows:2,maxrows:3,class:"resize-none w-full",placeholder:"Brief description of dataset"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024),a(I,{ui:{content:"max-w-sm h-fit"}},{default:t(()=>[a(u,{color:"error",size:"sm",label:"Delete",disabled:!f.value,icon:"lucide:trash-2",class:"self-end",onClick:r=>F(o.id)},null,8,["disabled","onClick"])]),content:t(()=>[f.value?(i(),c(v,{key:0},[l(" This will clear any metadata you've provided for this dataset, including columns you define on the next page. ")],64)):(i(),c(v,{key:1},[l(" At least one dataset is required. ")],64))]),_:2},1024),h<n.value.length-1?(i(),b(j,{key:0})):S("",!0)]),_:2},1024)]),_:2},1032,["name","schema"]))),128))]),_:1})]),footer:t(()=>[a(u,{color:"success",size:"sm",onClick:y},{default:t(()=>[...e[7]||(e[7]=[l(" Add Dataset ",-1)])]),_:1})]),_:1}),d.length>0?(i(),b(O,{key:0,color:"error",variant:"subtle",title:"Please fix the following errors before continuing:",description:d.filter(o=>o.name==="datasets").map(o=>o.message).join(", ")},null,8,["description"])):S("",!0)]),_:2},1024),s("div",me,[s("div",ue,[a(u,{color:"neutral",variant:"soft",onClick:p(M)},{default:t(()=>[...e[8]||(e[8]=[l(" Back ",-1)])]),_:1},8,["onClick"]),a(u,{type:"submit",color:"primary",disabled:d.length>0},{default:t(()=>[...e[9]||(e[9]=[l(" Save and Continue ",-1)])]),_:1},8,["disabled"])])])]),_:1},8,["schema","state"])])}}}),Be=Object.assign(pe,{__name:"MetadataDatasets"});export{Be as default};
