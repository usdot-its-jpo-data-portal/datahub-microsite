import L from"./DDbT4-To.js";import Y from"./IBmhqWhp.js";import J from"./DMXReEX-.js";import{f as Q,ay as W,K as X,Y as Z,h as ee,c as p,o as m,a as f,b as a,w as t,d as s,F as b,r as w,s as k,q as te,j as n,i as T,af as ae,t as B,v as oe}from"./CTM-UXwp.js";import{_ as ne}from"./BwRCwlPJ.js";import{_ as se,a as le}from"./C6ukg3sm.js";import{_ as re}from"./mmxqorE3.js";import{_ as ie}from"./CW54TMvo.js";import{_ as ue}from"./SEP4cSDA.js";import{_ as me}from"./Cq7QM8z_.js";import{_ as de}from"./CNDGWnad.js";import{_ as ce}from"./DHuvJM40.js";import{u as F,c as fe,b as _e,d as pe}from"./C3tgtHDE.js";import{c as N}from"./Zh0PsCTm.js";import"./DR_irzcd.js";import"./BKowkTF0.js";import"./CM4A4mA2.js";import"./_e_qfkaz.js";import"./Edj9Qn0N.js";import"./DO-GUAxx.js";function P(v,y){return v.length>y?`${v.slice(0,y)}...`:v}const ve={class:"@container flex flex-col gap-6"},ye={class:"flex gap-2 justify-between items-center"},Ce={class:"grid flex-1"},ge={class:"font-semibold truncate"},be={class:"grid grid-cols-1 lg:grid-cols-2 gap-4"},ke={class:"flex justify-end"},he={class:"flex gap-2"},xe={name:"MetadataDatasetColumns"},$e=Q({...xe,setup(v){const{datasetColumns:y,datasets:h}=W(F()),{moveToPreviousStep:j,submitDatasetColumns:q}=F(),l=X([]);Z(()=>{l.value=[...y.value];for(const o of l.value)o.columns.length===0&&o.columns.push(N())});function O(o){const e=l.value.findIndex(r=>r.datasetId===o);e!==-1&&l.value[e]?.columns.push(N())}function z(o,e){const r=l.value.findIndex(_=>_.datasetId===o);if(r===-1)return;const i=l.value[r]?.columns;if(i&&i.length>1){const _=i.findIndex(x=>x.id===e);i.splice(_,1)}}const U=ee(()=>o=>{const e=l.value.findIndex(i=>i.datasetId===o);if(e===-1)return!1;const r=l.value[e]?.columns;return r?r.length>1:!1});return(o,e)=>{const r=L,i=Y,_=J,x=oe,M=ne,$=le,A=re,R=ie,C=te,E=ae,G=ue,S=me,V=se,D=de,H=ce;return m(),p("div",ve,[f("div",null,[a(r,null,{default:t(()=>[...e[1]||(e[1]=[s("Dataset Columns",-1)])]),_:1}),a(i,null,{default:t(()=>[...e[2]||(e[2]=[s(" Please provide the name, description, and data type of each column that exists in all of your main data files. ",-1)])]),_:1}),a(i,null,{default:t(()=>[e[4]||(e[4]=f("span",{class:"font-bold"},"Note:",-1)),e[5]||(e[5]=s(" If you are including a column that contains DateTime values and you would like to be able to filter/sort your dataset by these values, please make sure that they are in ",-1)),a(_,{to:"https://en.wikipedia.org/wiki/ISO_8601",external:"",rel:"noopener noreferrer",target:"_blank"},{default:t(()=>[...e[3]||(e[3]=[s(" ISO 8601 ",-1)])]),_:1}),e[6]||(e[6]=s(" format. ",-1))]),_:1})]),a(V,{state:l.value,schema:n(pe),class:"flex flex-col gap-8",onSubmit:e[0]||(e[0]=u=>n(q)(u.data))},{default:t(()=>[a(S,null,{default:t(()=>[a(D,null,{default:t(()=>[(m(!0),p(b,null,w(l.value,(u,g)=>(m(),k(H,{key:u.datasetId,variant:"soft",ui:{header:"bg-neutral-200"}},{header:t(()=>[f("div",ye,[f("div",Ce,[f("h4",ge,B(("truncateString"in o?o.truncateString:n(P))(n(h)[g]?.title??"",60)),1)]),n(h)[g]?.fileName?(m(),k(x,{key:0,color:"neutral",variant:"subtle"},{default:t(()=>[s(B(("truncateString"in o?o.truncateString:n(P))(n(h)[g]?.fileName??"",15)),1)]),_:2},1024)):T("",!0)])]),default:t(()=>[a(S,null,{default:t(()=>[a(D,null,{default:t(()=>[(m(!0),p(b,null,w(u.columns,(d,I)=>(m(),k(V,{key:I,schema:n(fe),name:`${g}.columns.${I}`,nested:""},{default:t(()=>[a(S,null,{default:t(()=>[f("div",be,[a($,{required:!0,label:"Name",name:"name"},{default:t(()=>[a(M,{modelValue:d.name,"onUpdate:modelValue":c=>d.name=c,class:"w-full",placeholder:"Column name",icon:"lucide:letter-text"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a($,{required:!0,label:"Data type",name:"dataType"},{default:t(()=>[a(A,{modelValue:d.dataType,"onUpdate:modelValue":c=>d.dataType=c,items:Object.entries(n(_e)).map(([c,K])=>({value:c,label:K})),class:"w-full",placeholder:"Select column data type"},null,8,["modelValue","onUpdate:modelValue","items"])]),_:2},1024)]),a($,{required:!0,label:"Description",name:"description"},{default:t(()=>[a(R,{modelValue:d.description,"onUpdate:modelValue":c=>d.description=c,autoresize:"",rows:1,maxrows:2,class:"resize-none w-full",placeholder:"Brief description of column"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(E,null,{default:t(()=>[a(C,{color:"error",size:"sm",disabled:!n(U)(u.datasetId),label:"Delete",icon:"lucide:trash-2",class:"self-end",onClick:c=>z(u.datasetId,d.id)},null,8,["disabled","onClick"])]),content:t(()=>[n(U)(u.datasetId)?(m(),p(b,{key:0},[s(" This will clear any metadata you've provided for this column ")],64)):(m(),p(b,{key:1},[s(" At least one column is required for each dataset. ")],64))]),_:2},1024),I<u.columns.length-1?(m(),k(G,{key:0})):T("",!0)]),_:2},1024)]),_:2},1032,["schema","name"]))),128))]),_:2},1024)]),_:2},1024)]),footer:t(()=>[a(C,{color:"success",size:"sm",onClick:d=>O(u.datasetId)},{default:t(()=>[...e[7]||(e[7]=[s(" Add Column ",-1)])]),_:1},8,["onClick"])]),_:2},1024))),128))]),_:1})]),_:1}),f("div",ke,[f("div",he,[a(C,{color:"neutral",variant:"soft",onClick:n(j)},{default:t(()=>[...e[8]||(e[8]=[s(" Back ",-1)])]),_:1},8,["onClick"]),a(C,{type:"submit",color:"primary"},{default:t(()=>[...e[9]||(e[9]=[s(" Save and Continue ",-1)])]),_:1})])])]),_:1},8,["state","schema"])])}}}),He=Object.assign($e,{__name:"MetadataDatasetColumns"});export{He as default};
